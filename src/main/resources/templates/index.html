<html xmlns="http://www.w3.org/1999/xhtml" 
            xmlns:th="http://www.thymeleaf.org" 
            xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
            xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

    <head>
        <meta charset="utf-8" />
        <title th:text="#{app.title}"></title>
        <meta name="description" content="Modal examples">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
		<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>        
        <link rel="stylesheet" type="text/css" th:href="@{/ui/w2ui-1.5.min.css}" />
		<script>
			WebFont.load({
				google: {
					"families": ["Poppins:300,400,500,600,700", "Roboto:300,400,500,600,700"]
				},
				active: function() {
					sessionStorage.fonts = true;
				}
			});
		</script>		
		<link th:href="@{/ui/metronic_v5/assets/vendors/base/vendors.bundle.css}" rel="stylesheet" type="text/css" />
		<link th:href="@{/ui/metronic_v5/assets/demo/default/base/style.bundle.css}" rel="stylesheet" type="text/css" />
		<link rel="shortcut icon" th:href="@{/ui/metronic_v5/assets/demo/default/media/img/logo/warehouse.png}" />
    </head>

<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--fixed m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">
		<div class="m-grid m-grid--hor m-grid--root m-page">

            <div  th:insert="headerindex"></div>

            <div  th:insert="bodyindex"></div>
            

        </div>

        <div  th:insert="toogleindex"></div>
		

<script th:src="@{/ui/metronic_v5/assets/vendors/base/vendors.bundle.js}" type="text/javascript"></script>
<script th:src="@{/ui/metronic_v5/assets/demo/default/base/scripts.bundle.js}" type="text/javascript"></script>
<script th:src="@{/ui/metronic_v5/assets/demo/default/custom/crud/forms/widgets/bootstrap-datepicker.js}" type="text/javascript"></script>	
</body>

    <script type="text/javascript" th:src="@{/ui/w2ui-1.5.min.js}"></script>
	<script type="text/javascript" th:inline="javascript">		
				   $('#grid').w2grid({ 
							name: 'grid', 
							// header: 'List of Panduan',
							total: 9,
							records: [
				{ "recid": 1, "snama": "John"  , "snomor": "Doe"    , "sjudul": "jdoe@gmail.com1", "slembaga":"Ptkp" ,"stanggal": "4/3/2012" ,"ssertifikat":'[[${qrcode}]]' },
				{ "recid": 2, "snama": "Stuart", "snomor": "Motzart", "sjudul": "jdoe@gmail.com2", "slembaga":"ptkps","stanggal": "4/3/2012" ,"ssertifikat":'[[${qrcode}]]' },
				{ "recid": 3, "snama": "Stuart2", "snomor": "Motzart", "sjudul": "jdoe@gmail.com3", "slembaga":"ptkps","stanggal": "4/3/2012","ssertifikat":'[[${qrcode}]]' }
							
							],
							show: {
							//	 header         : true,
								toolbar        : true,
								footer         : true,
								lineNumbers    : true,
								selectColumn   : true,
							//	expandColumn   : true
							},        
							columns: [                
								{ field: 'snama', caption: 'Nama', size: '30%' },
								{ field: 'snomor', caption: 'Nomer Sertifikat', size: '70%' },
								{ field: 'sjudul', caption: 'Judul Traning', size: '120%' },
								{ field: 'slembaga', caption: 'Lembaga Penyelenggara', size: '120%' },
								{ field: 'stanggal', caption: 'Tanggal Pelaksanaan', size: '120%' },
								{ field: 'ssertifikat', caption: 'Sertifikat', size: '120%' }
							],
							searches: [
								{ type: 'int',  field: 'recid', caption: 'ID' },
								{ type: 'text', field: 'snama', caption: 'Nama' },
								{ type: 'text', field: 'snomor', caption: 'Nomer Sertifikat' },
								{ type: 'text', field: 'sjudul', caption: 'Judul Traning' },
								{ type: 'text', field: 'slembaga', caption: 'Lembaga Penyelenggara' },
								{ type: 'date', field: 'stanggal', caption: 'Tanggal Pelaksanaan' },
								{ type: 'text', field: 'ssertifikat', caption: 'Sertifikat' }
							],
							onDblClick: function(event) {
							var grid = this;
							event.onComplete = function() {
								var sel_rec_ids = grid.getSelection();
								if (sel_rec_ids.length) {
									var sel_record = grid.get(sel_rec_ids[0]);
									console.log('selected ID:', sel_record.ssertifikat, '/ selected Name:', sel_record.snama);
									openPopup(sel_record.ssertifikat);
								} else {
									console.log("Nothing selected!");
								}
							}
							}
						});   
						w2ui['grid'].hideColumn('ssertifikat');
						function openPopup(params) {
							w2popup.open({
										title: 'QR Code Sertifikat',
										width: 300,
										height: 340,
										showMax: true,
										body: '<div > <img src='+params+' alt="" height="300" width="300" style=" display: block;margin-left: auto;  margin-right: auto;  width: 100%;">  </div>',
										onToggle(event) {
											event.done(() => { w2ui.layout.resize() })
										}
									})
									.then(() => {
										$('#w2ui-popup #main').w2render('layout')
										w2ui.layout.html('left', w2ui.sidebar)
										w2ui.layout.html('main', w2ui.grid)
									})
							}
			</script>
</html>